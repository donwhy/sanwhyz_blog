---
id: pmsm_motor
slug: /pmsm_motor
title: æ°¸ç£åŒæ­¥ç”µæœº
date: 2025-1-12
name: ğŸ“ºåˆ«é—®æˆ‘why
title: åµŒå…¥å¼ / å­¦ç”Ÿ
url: https://github.com/disnox
image_url: /img/logo.webp
tags: [pmsm]
keywords: [pmsm]
image: /img/blog/question.png
sticky: 1
---

<!-- truncate -->

## 1. ä¸‰ç›¸ PMSM åŸºæœ¬æ•°å­¦æ¨¡å‹

å½“ä¸‰ç›¸PMSMè½¬å­ç£è·¯çš„ç»“æ„ä¸åŒæ—¶ï¼Œç”µæœºçš„è¿è¡Œæ€§èƒ½ã€æ§åˆ¶æ–¹æ³•ã€åˆ¶é€ å·¥è‰ºå’Œé€‚ç”¨åœºåˆä¹Ÿä¼šä¸åŒã€‚ç›®å‰ï¼Œæ ¹æ®æ°¸ç£ä½“è½¬å­ä¸Šçš„ä½ç½®ä¸åŒï¼Œä¸‰ç›¸PMSMçš„è½¬å­ç»“æ„å¯ä»¥åˆ†ä¸ºè¡¨è´´å¼å’Œå†…ç½®å¼ä¸¤ç§ç»“æ„ã€‚

ä¸€èˆ¬è¡¨è´´å¼æ°¸ç£åŒæ­¥ç”µæœºæˆ‘ä»¬è®¤ä¸º $L_d = L_q$ï¼Œå†…åµŒå¼æ°¸ç£åŒæ­¥ç”µæœº $L_d < L_q$ã€‚æœ‰äº›æ—¶å€™ç”±äºå·¥è‰ºé—®é¢˜ï¼Œæœ‰äº›ç”µæœºä¸èƒ½ä»è‚‰çœ¼ä¸Šçœ‹å‡ºç”µæœºçš„æ°¸ç£ä½“æ˜¯å†…åµŒçš„è¿˜æ˜¯è¡¨è´´çš„å¯é€šè¿‡ DQ è½´ç”µæ„Ÿé‡è¿›è¡Œåˆ¤æ–­ã€‚

### 1.1 è¡¨è´´å¼ PMSM

ä¸‹å›¾æ‰€ç¤ºä¸ºè¡¨é¢è´´è£…ç”µæœºï¼Œä¸å†…ç½®å¼ PMSM ç›¸æ¯”ï¼Œè¯¥ç”µæœºå…·æœ‰ä½è½¬çŸ©çº¹æ³¢å’Œä½æˆæœ¬çš„ä¼˜ç‚¹ã€‚ ç”±äºæ‰€è€ƒè™‘ç”µæœºç±»å‹çš„æ°”éš™ç£é€šæ˜¯å¹³æ»‘çš„ï¼Œå› æ­¤å®šå­çš„ç”µæ„Ÿå€¼ $L_d = L_q$ï¼ˆéå‡¸æ PMSMï¼‰

 ![image-20231005213702382](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231005213702382.png)

### 1.2 å†…ç½®å¼ PMSM

ä¸‹å›¾æ‰€ç¤ºä¸º IPMSM ï¼Œé™¤åŒæ­¥è½¬çŸ©å¤–ï¼Œè¿˜å…·æœ‰é¢å¤–çš„ç£é˜»è½¬çŸ©ã€‚ä¸ SPMSM ç±»å‹ç›¸æ¯”ï¼Œå®ƒåœ¨ç»™å®šçš„å·¥ä½œç”µæµä¸‹æä¾›æ›´é«˜çš„è½¬çŸ©ã€‚åœ¨å†…ç½®å¼ PMSM ä¸­ï¼Œç£é€šè·¯å¾„çš„ç£é˜»æ ¹æ®è½¬å­ä½ç½®è€Œå˜ åŒ–ã€‚è¿™ç§ç£å‡¸ææ€§ä¼šå¯¼è‡´ç”µæœºç«¯å­å¤„çš„ç”µæ„Ÿéšè½¬å­ä½ç½®å˜åŒ–ã€‚å› æ­¤ï¼Œå—ç£é€šè·¯å¾„ä¸­çš„æ°¸ç£ä½“ å½±å“ï¼Œ$L_d$ å’Œ $L_q$  çš„æœ‰æ•ˆç£é€šé•¿åº¦ä¸åŒï¼Œå³ $L_d\not=L_q$ï¼ˆå‡¸æï¼‰ã€‚æ‰€ä»¥ IPMSM å…·æœ‰ç”µæ„Ÿå‡¸ææ€§ï¼Œ å¹¶ä¸”å®ƒåˆ©ç”¨äº†ç£é˜»è½¬çŸ©å’Œæ°¸ç£è½¬çŸ©ã€‚

![image-20231005220046870](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231005220046870.png)

## 2. å¸¸ç”¨æ•°å­¦å…¬å¼

### 2.1 ABC ä¸‰ç›¸é™æ­¢åæ ‡ç³»

#### 2.1.1 ä¸‰ç›¸å®šå­ç”µå‹æ–¹ç¨‹

$$
\begin{cases}
u_a = R_s\times i_a + L\cfrac{d\psi_a}{d_t}\\
u_b = R_s\times i_b + L\cfrac{d\psi_b}{d_t}\\
u_c = R_s\times i_c + L\cfrac{d\psi_c}{d_t}
\end{cases}
$$

+ $R_s$ï¼š å®šå­ç”µé˜»

+ $u_a$ï¼Œ$u_b$ï¼Œ$u_c$ ï¼šä¸‰ç›¸å®šå­ç”µå‹

+ $i_a$ï¼Œ$i_b$ï¼Œ$i_c$ï¼šä¸‰ç›¸å®šå­ç”µæµ

+ $\psi_a$ï¼Œ$\psi_b$ï¼Œ$\psi_c$ ï¼šä¸‰ç›¸å®šå­ç£é“¾

#### 2.1.2 ä¸‰ç›¸å®šå­ç£é“¾æ–¹ç¨‹

ç”±ä¸‹é¢å…¬å¼å¯ä»¥çœ‹å‡ºå®šå­ç£é“¾æ–¹ç¨‹æ˜¯å¤šå˜é‡ï¼Œå¼ºè€¦åˆçš„

$$
\begin{cases}
\psi_a = L_{aa}\times i_a + M_{ab}\times i_b + M_{ac}\times i_c+\psi_f\times cos\theta_e \\
\psi_b = M_{ba}\times i_a + L_{aa}\times i_b + M_{ac}\times i_c+\psi_f\times cos(\theta_e-\cfrac{2}{3}\pi) \\
\psi_c = M_{ca}\times i_a + M_{cb}\times i_b + L_{cc}\times i_c+\psi_f\times cos(\theta_e+\cfrac{2}{3}\pi)
\end{cases}
$$

+ $L_{aa}$ï¼šA ç›¸è‡ªæ„Ÿ

+ $M_{ba}$ï¼šB ç›¸å’Œ A ç›¸çš„äº’æ„Ÿï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸‰ç›¸çš„è‡ªæ„Ÿç›¸åŒï¼Œä¸‰ç›¸çš„äº’æ„Ÿä¹Ÿç›¸åŒ
+ $Ïˆ_f$ï¼šç”µæœºæ°¸ç£ä½“çš„ç£é“¾
+ $Î¸_e$ï¼šè½¬å­ç”µè§’åº¦ï¼Œå³ D è½´ä¸ A è½´å¤¹è§’çš„ç©ºé—´ç”µè§’åº¦ä¹Ÿå¯ä»¥è¯´æ˜¯è½¬å­ N æå’Œ A ç›¸è½´çº¿ä¹‹é—´çš„å¤¹è§’

### 2.2 Î±-Î² é™æ­¢åæ ‡ç³»

#### 2.2.1 Î±-Î² è½´ç”µå‹æ–¹ç¨‹

$$
\begin{bmatrix} u_\alpha \\ u_\beta \end{bmatrix} = \begin{bmatrix} R_s+\cfrac{d}{dt}L_d & \omega_e(L_d-Lq)  \\ -\omega_e(L_d-Lq) &  R_s+\cfrac{d}{dt}L_d \end{bmatrix}\begin{bmatrix} i_\alpha \\ i_\beta \end{bmatrix} + \begin{bmatrix} e_\alpha \\ e_\beta \end{bmatrix}
$$

$$
\begin{cases}
u_\alpha = R_si_\alpha+L_s\cfrac{d}{dt}i_\alpha-\omega_e\psi_fsin\theta_e\\
u_\beta = R_si_\beta+L_s\cfrac{d}{dt}i_\beta+\omega_e\psi_fcos\theta_e
\end{cases}
$$

+ $u_\alpha$ã€$u_\beta$ï¼šÎ±-Î² è½´ç”µå‹
+ $R_s$ï¼šç›¸ç”µé˜»
+ $L_s$ï¼šç›¸ç”µæ„Ÿ
+ $\omega_e$ï¼š ç”µæœºè§’é€Ÿåº¦
+ $Î¸_e$ ï¼šç”µè§’åº¦

#### 2.2.2 Î±-Î² è½´åç”µåŠ¨åŠ¿æ–¹ç¨‹

$$
\begin{bmatrix}
e_\alpha \\ e_\beta \end{bmatrix} =
\begin{bmatrix}
(L_d - L_q)(\omega_ei_d-\cfrac{d}{d_t}i_q)+\omega_e\psi_f \end{bmatrix}\begin{bmatrix} -sin\theta_e \\ cos\theta_e \end{bmatrix}
$$

+ $L_d$ã€$L_q$ï¼šd-q è½´ç”µæ„Ÿ
+ $\omega_e$ï¼š ç”µæœºè§’é€Ÿåº¦
+ $Î¸_e$ ï¼šç”µè§’åº¦
+ $e_\alpha$ã€$e_Î²$ï¼šåˆ†åˆ«æ˜¯ Î±-Î² è½´çš„åç”µåŠ¨åŠ¿

#### 2.2.3 Î±-Î² è½´ç£é“¾æ–¹ç¨‹

$$
\begin{cases}
\cfrac{d\psi_\alpha}{dt} = L_s\cfrac{d}{dt}i_\alpha-\omega_e\psi_fsin\theta_e\\
\cfrac{d\psi_\beta}{dt} = L_s\cfrac{d}{dt}i_\beta+\omega_e\psi_fcos\theta_e
\end{cases}
$$

+ $\psi_\alpha$ã€$\psi_\beta$ï¼šÎ±-Î² è½´ç£é“¾
+ $\omega_e$ï¼š ç”µæœºè§’é€Ÿåº¦
+ $Î¸_e$ ï¼šç”µè§’åº¦
+ $L_s$ï¼šç›¸ç”µæ„Ÿ

### 2.3 d-q æ—‹è½¬åæ ‡ç³»

#### 2.3.1 d-q è½´ç”µå‹æ–¹ç¨‹

$$
\begin{cases}
u_d = R_si_d + L_d\cfrac{d}{dt}i_d-\omega_eL_qi_q\\
u_q = R_si_q + L_q\cfrac{d}{dt}i_q+\omega_e(L_di_d+\psi_f)
\end{cases}
$$

+ $u_d$ã€$u_q$ï¼šd-q è½´ç”µå‹

+ $i_d$ã€$i_q$ï¼šd-q è½´ç”µæµ
+ $\omega_e$ï¼šç”µè½¬é€Ÿ
+ $p$ï¼šæå¯¹æ•°
+ $\psi_f$ï¼šæ°¸ç£ä½“ç£é“¾
+ $R_s$ï¼š ç›¸ç”µé˜»

#### 2.3.2 ç”µç£è½¬çŸ©æ–¹ç¨‹

$$
\tau_{em} =\cfrac{3}{2}p_ni_qi_d(L_d-L_q)+\cfrac{3}{2}p_ni_q\psi_f
$$

+ $\tau_{em}$ï¼šç”µç£è½¬çŸ©
+ $p_n$â€‹ ï¼šç”µæœºæå¯¹æ•°
+ $\cfrac{3}{2}p_ni_q\psi_f$ ï¼šåŠ±ç£è½¬çŸ©
+ $\cfrac{3}{2}p_ni_qi_d(L_d-L_q)$ï¼šç£é˜»è½¬çŸ©

ä»ä¸Šé¢çš„ç­‰å¼å¯ä»¥çœ‹å‡ºï¼Œç£é˜»è½¬çŸ©æ˜¯ç”±äº d-q è½´çš„ç”µæ„Ÿä¸åŒæ‰€äº§ç”Ÿçš„ã€‚æ‰€ä»¥è¡¨è´´ç”µæœºå°±æ²¡æœ‰ç£é˜»è½¬çŸ©ã€‚æƒ³è¦è¾“å‡ºçš„æ‰­çŸ©å¤Ÿå¤§ä¸ä»…éœ€è¦ä»ç”µæœºæœ¬ä½“ä¸‹æ‰‹ï¼ˆå¢å¤§æ°¸ç£åŒæ­¥ç”µæœºçš„æ°¸ç£ä½“ç£é“¾å’Œå¢åŠ æå¯¹æ•°éƒ½èƒ½å¢åŠ ç”µæœºè¾“å‡ºæ‰­çŸ©ï¼‰ï¼Œè¿˜éœ€è¦åœ¨æ§åˆ¶ä¸Šè€ƒè™‘ï¼Œå¦‚æœç”µæœº $L_d â‰  L_q$ ç”¨ $i_d=0$ çš„æ§åˆ¶æ¨¡å¼å°±ä¸èƒ½è¾“å‡ºæœ€å¥½çš„æ•ˆç‡ï¼Œ**MTPA** çš„æ§åˆ¶æ–¹æ³•å°±å‡ºæ¥äº†ã€‚

#### 2.3.3 d-q è½´è¿åŠ¨æ–¹ç¨‹

$$
\tau_{em} =\tau_{L}+\cfrac{1}{p_n}B\omega_e+\cfrac{1}{p_n}J\cfrac{d\omega}{dt}
$$

+ $\tau_{em}$ï¼šç”µç£è½¬çŸ©
+ $\tau_L$ï¼šè´Ÿè½½è½¬çŸ©
+ $p_n$ ï¼šç”µæœºæå¯¹æ•°
+ $B$ï¼šç²˜æ»æ‘©æ“¦ç³»æ•°
+ $J$ï¼šè½¬åŠ¨æƒ¯é‡
+ $\omega _e$ï¼šè§’é€Ÿåº¦

#### 2.3.4 d-q è½´ç£é“¾æ–¹ç¨‹

$$
\begin{cases}
\psi_d = L_di_d+\psi_f \\
\psi_q = L_qi_q
\end{cases}
$$

+ $Ïˆ_d$ã€$Ïˆ_q$ æ˜¯ï¼šd-q è½´çš„ç£é“¾
+ $Ïˆ_f$ï¼šç”µæœºæ°¸ç£ä½“çš„ç£é“¾

å¹³æ—¶è¯´çš„å¼±ç£æ§åˆ¶å°±æ˜¯ç»™ $âˆ’i_d$ ï¼Œä»ä¸Šé¢çš„å…¬å¼å°±å¯ä»¥çœ‹å‡º $Ïˆ_f$ ä¸å˜ï¼Œå½“ $i_d < 0$ å°±è¾¾åˆ°äº†å‡å° d è½´ç£é“¾çš„æ•ˆæœã€‚

#### 2.3.5 åŠŸç‡ä¼°ç®—

$$
P_{out}=\cfrac{3}{2}(u_di_d+u_qi_q)
$$

+ $u_d$ã€$u_q$ï¼šd-q è½´ç”µå‹

+ $i_d$ã€$i_q$ï¼šd-q è½´ç”µæµ
+ $P_{out}$ï¼šè¾“å‡ºåŠŸç‡

### 2.4 è§’åº¦ä¸é€Ÿç‡è½¬æ¢

#### 2.4.1 ç”µè§’åº¦ä¸æœºæ¢°è§’åº¦

æœºæ¢°è§’åº¦è½¬ä¸€åœˆï¼Œå°±æœ‰æå¯¹æ•°ä¸ªç”µè§’åº¦ï¼Œæ‰€ä»¥ï¼š
$$
\theta_e = \theta \times P_n
$$

+ $\theta_e$ï¼šç”µè§’åº¦
+ $\theta$ï¼šæœºæ¢°è§’åº¦
+ $P_n$ï¼šæå¯¹æ•°

#### 2.4.2 è§’é€Ÿåº¦ä¸é€Ÿåº¦

$$
\begin{cases}
\omega_e = 2\pi f(rad/s)\\
n = \cfrac{60f}{p_n}(rpm/min)
\end{cases}
$$

è§’é€Ÿåº¦ä¸ç”µæœºè½¬é€Ÿç›¸äº’è½¬æ¢ï¼š
$$
\omega_e = \cfrac{2\pi p_nn}{60}
$$

+ $\omega_e$ï¼šè§’é€Ÿåº¦
+ $f$ï¼šç”µæœºé¢‘ç‡
+ $n$ï¼šç”µæœºè½¬é€Ÿ
+ $p_n$ï¼šæå¯¹æ•°

å…¶ä¸­åœ¨å®é™…å·¥ç¨‹ä¸­å¯ä»¥ç”¨ç¤ºæ³¢å™¨è¯»å–ç›¸ç”µæµçš„é¢‘ç‡å€¼ã€‚é€šè¿‡è¿™ä¸ªå…¬å¼å¯ä»¥æ–¹ä¾¿çš„åœ¨å®é™…åº”ç”¨ä¸­æµ‹é‡è½¬é€Ÿæˆ–è€…æå¯¹æ•°å‚æ•°ã€‚

### 2.5 ç”µå‹æé™åœ†å’Œç”µæµæé™ï¼ˆæ¤­ï¼‰åœ†

ä»¤ï¼š

$$
I^2_m = i^2_d+i_q^2
$$

å‰é¢ä»‹ç»äº† d-q è½´åæ ‡ä¸‹ç”µå‹æ–¹ ç¨‹ï¼Œç°åœ¨è€ƒè™‘ç¨³æ€ï¼Œè¿™é‡Œå¯ä»¥å…ˆå¿½ç•¥ $R_s$ï¼Œç¨³æ€çš„æ—¶ å€™ $i_d$ å’Œ $i_q$ ä¸å†å˜åŒ–ï¼Œå¹¶æŠŠç”µå‹æ–¹ç¨‹å’Œç£é“¾æ–¹ç¨‹æ•´åˆï¼Œå› æ­¤ç”µå‹æ–¹ç¨‹å¯ä»¥ç®€åŒ–ä¸ºï¼š

$$
\begin{cases}
u_d = -\omega_eL_qi_q=-\omega_e\psi_q \\
u_q = \omega(L_di_d+\psi_f)=\omega_e\psi_d
\end{cases}
$$

#### 2.5.1 è¡¨è´´ç”µæœºç”µå‹ä¸ç”µæµæé™åœ†

å½“ç”µæœºä¸ºè¡¨è´´ç”µæœºæ—¶ï¼š$L_d = L_q = L$

åŒæ ·ï¼Œä»¤

$$
u^2_m = u^2_d+u_q^2
$$

ä»£å…¥å¾—ï¼š
$$
(\cfrac{u_m}{\omega_eL})^2=(i_d+\cfrac{\psi_f}{L})^2+i^2_q
$$

ç”»å‡ºç”µå‹å’Œç”µæµçš„æ›²çº¿åœ†ï¼š

å…¶ä¸­ç»¿è‰²æ˜¯ç”µå‹æé™åœ†ï¼Œçº¢è‰²æ˜¯ç”µæµæé™åœ†ã€‚

![image-20231009142948587](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009142948587.png)

ç”±ä¸Šå›¾å¯å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š

+ ç”µå‹æé™åœ†ä¸æ˜¯æ­£å¥½åœ¨ç”µæµåæ ‡ç³»çš„ä¸­å¿ƒï¼Œåç½®ä¸º $\cfrac{\psi_f}{L}$
+ è½¬é€Ÿè¶Šé«˜ï¼Œç”µå‹åœ†çš„åŠå¾„è¶Šå°
+ ç”µæœºå¿…é¡»å·¥ä½œåœ¨ç”µå‹åœ†ä¸ç”µæµåœ†åŒæ—¶è¦†ç›–çš„åŒºåŸŸ

**å½“ç”µæœºè½¬é€Ÿå¾ˆä½æ—¶ï¼Œç”µå‹æé™åœ†å¾ˆå¤§**ï¼Œç”µæµæé™æ˜¯å…¶ä¸»è¦çº¦æŸï¼Œå› æ­¤ä½é€Ÿä¸‹ç”µæµå¯ä»¥ä¸€ç›´ä¿æŒåœ¨ $i_q$ ä¸ºæœ€å¤§å€¼çŠ¶æ€ï¼Œæ­¤æ—¶ç§°ä¹‹ä¸ºæ’è½¬çŸ©åŒºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ T1 åŒºã€‚å½“è½¬é€Ÿç»§ç»­ä¸Šå‡æ—¶ï¼Œç”µå‹å’Œç”µæµæé™åœ†éƒ½æˆä¸ºçº¦æŸï¼Œä¸¤è€…çš„äº¤ç‚¹å¤„ä¸ºå·¥ä½œç‚¹ï¼Œå¦‚ä¸‹å›¾çš„ T2 å’Œ T3 åŒºï¼Œ $i_d$ å¼€å§‹å‡ºç°åˆ†é‡ï¼Œæ­¤æ—¶æˆä¸ºå¼±ç£çŠ¶æ€ï¼Œå³æ°¸ç£ä½“äº§ç”Ÿçš„ç£åœºè¢« $i_d$ äº§ç”Ÿçš„ç£åœºå‰Šå¼±äº†ï¼Œè¿›è€Œåœ¨åŒæ ·çš„ç”µå‹ä¸‹èƒ½å¤Ÿäº§ç”Ÿæ›´é«˜çš„è½¬é€Ÿã€‚

#### 2.5.1 å‡¸æç”µæœºç”µå‹ä¸ç”µæµæé™åœ†

å½“ç”µæœºä¸ºå‡¸æç”µæœºæ—¶ï¼š$L_d \not= L_q$ï¼Œç”µå‹åœ†æ–¹ç¨‹ä¸º

$$
(\cfrac{u_m}{\omega_eL})^2=L^2_d(i_d+\cfrac{\psi_f}{L})^2+(L_qi_q)^2
$$

è¿™é‡Œçš„ç”µå‹åœ†å·²ç»å˜æˆæ¤­åœ†äº†

![image-20231009144055101](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009144055101.png)

æ­¤æ—¶ä»»æ„çš„ $i_d$ å’Œ $i_q$ éƒ½å¯¹åº”ä¸€ä¸ªåŠ›çŸ©å€¼ï¼ŒæŠŠåŠ›çŸ©ç›¸åŒçš„çº¿è¿èµ·æ¥å°±å¾—åˆ°äº†ä¸€ç°‡ç­‰åŠ›çŸ©æ›²çº¿ï¼Œå¦‚ä¸‹å›¾ä¸‰æ¡é»‘è‰²çš„ç­‰åŠ›çŸ©çº¿ã€‚

![image-20231009144218100](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009144218100.png)

+ åŒä¸€ä¸ªç­‰åŠ›çŸ©çš„æ›²çº¿ä¼šå’Œä¸åŒçš„ç”µæµåœ†ç›¸åˆ‡ï¼Œäº§ç”Ÿä¸€ç³»åˆ—çš„åˆ‡ç‚¹ï¼Œè¿™äº›åˆ‡ç‚¹çš„è½¨è¿¹å°±æ˜¯ **MTPA**ï¼ˆæœ€å¤§åŠ›çŸ©æ¯”ç”µæµï¼‰æ§åˆ¶ç‚¹ï¼Œå› ä¸ºåœ¨ä¸€å®šçš„ç”µæµæé™ä¸‹ï¼Œè¯¥åˆ‡ç‚¹æ˜¯åŠ›çŸ©æœ€å¤§çš„ç‚¹ã€‚
+ åŒä¸€ä¸ªç­‰åŠ›çŸ©çš„æ›²çº¿ä¼šå’Œä¸åŒçš„ç”µå‹æ¤­åœ†ç›¸åˆ‡ï¼Œäº§ç”Ÿä¸€ç³»åˆ—çš„åˆ‡ç‚¹ï¼Œè¿™äº›åˆ‡ç‚¹çš„è½¨è¿¹å°± æ˜¯ **MFPT**ï¼ˆæœ€å¤§è½¬é€Ÿæ¯”åŠ›çŸ©ï¼‰æ§åˆ¶ç‚¹ï¼Œå› ä¸ºåœ¨ä¸€å®šç”µå‹æé™ï¼ˆç”µå‹ä»£è¡¨ç€é€Ÿåº¦ï¼‰ä¸‹ï¼Œè¯¥åˆ‡ç‚¹æ˜¯é€Ÿåº¦æœ€å¤§çš„ç‚¹ã€‚

æ§åˆ¶ä¸Šï¼Œæˆ‘ä»¬å°±éœ€è¦æ ¹æ®å®é™…ä¸åŒçš„å·¥å†µï¼Œæ‰¾åˆ° MTPA å¯¹åº”çš„ Id å’Œ Iq çš„æ›²çº¿ç‚¹ï¼Œé€šè¿‡æŸ¥è¡¨æˆ–è€…å…¶ä»–æ–¹æ³•ç»™åˆ°æ§åˆ¶ç”µæµæŒ‡ä»¤ã€‚

## 3. ç”µæœºå‚æ•°çš„æµ‹é‡å’Œè®¡ç®—

### 3.1 ç›¸ç”µé˜»

#### 3.1.1 ä¸‡ç”¨è¡¨æµ‹é‡

ç›¸ç”µé˜»å¯ä»¥ä½¿ç”¨ä¸‡ç”¨è¡¨åšç²—ç•¥æµ‹é‡ï¼Œç”¨ä¸‡ç”¨è¡¨çš„ä¸¤æ”¯è¡¨ç¬”æ¥ç”µæœºçš„ä»»æ„ä¸¤ç›¸ï¼Œæ‰€å¾—åˆ°çš„é˜»å€¼çš„ä¸€åŠå°±æ˜¯ç›¸ç”µé˜»ã€‚

![image-20231009151015155](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009151015155.png)

ä¸‰ç›¸ç”µæœºçš„ç­‰æ•ˆç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚$R_a$ã€$R_b$ã€$R_c$ åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µé˜»ï¼Œ$L_a$ã€$L_b$ã€$L_c$åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µæ„Ÿã€‚

![](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009151333270.png)

å‡è®¾ä¸‡ç”¨è¡¨çš„ä¸¤æ”¯è¡¨ç¬”åˆ†åˆ«æ¥ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ï¼Œ3æ¬¡æµ‹å¾—çš„é˜»å€¼åˆ†åˆ«ä¸º$R_1$ã€$R_2$ã€$R_3$ï¼Œé‚£ä¹ˆï¼š
$$
\begin{cases}
R_1 = R_a+R_b\\
R_2 = R_a+R_c\\
R_3 = R_b+R_c
\end{cases}
$$

å‡å®šç”µæœºçš„ä¸‰ç›¸å¯¹ç§°ï¼Œç”µé˜»å€¼ç›¸ç­‰ï¼Œå³$R_a=R_b=R_c$ï¼Œå¯ä»¥å¾—å‡ºç”µæœºçš„ç›¸ç”µé˜» $R_S$ï¼Œä¸º

$$
R_s = \cfrac{R_1+R_2+R_3}{3}\times\cfrac{1}{2}
$$

#### 3.1.2 ç”µæ¡¥æµ‹é‡

ç›¸ç”µé˜»ä½¿ç”¨ç”µæ¡¥æµ‹é‡æ—¶ï¼šå°†é¢‘ç‡è®¾ä¸º 1kHzï¼Œç”µå‹è®¾ä¸º1Vï¼Œç„¶åç”¨ç”µæ¡¥çš„ä¸¤æ”¯è¡¨ç¬”æ¥ç”µæœºçš„ä»»æ„ä¸¤ç›¸ï¼Œæ‰€å¾—åˆ°é˜»å€¼çš„ä¸€åŠå°±æ˜¯ç›¸ç”µé˜»ã€‚

![image-20231009152626377](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009152626377.png)

ä¸ºäº†æé«˜æµ‹é‡ç²¾åº¦ï¼Œä¹Ÿå¯ä»¥åƒä¸‡ç”¨è¡¨æµ‹é‡ä¸€æ ·ï¼Œåˆ†åˆ«æµ‹ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ã€‚

ä¸‰ç›¸ç”µæœºçš„ç­‰æ•ˆç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚$R_a$ã€$R_b$ã€$R_c$ åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µé˜»ï¼Œ$L_a$ã€$L_b$ã€$L_c$åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µæ„Ÿã€‚

![](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009151333270.png)

å‡è®¾ç”µæ¡¥çš„ä¸¤æ”¯è¡¨ç¬”åˆ†åˆ«æ¥ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ï¼Œ3æ¬¡æµ‹å¾—çš„é˜»å€¼åˆ†åˆ«ä¸º$R_1$ã€$R_2$ã€$R_3$ï¼Œé‚£ä¹ˆï¼š
$$
\begin{cases}
R_1 = R_a+R_b\\
R_2 = R_a+R_c\\
R_3 = R_b+R_c
\end{cases}
$$

å‡å®šç”µæœºçš„ä¸‰ç›¸å¯¹ç§°ï¼Œç”µé˜»å€¼ç›¸ç­‰ï¼Œå³$R_a=R_b=R_c$ï¼Œå¯ä»¥å¾—å‡ºç”µæœºçš„ç›¸ç”µé˜» $R_S$ï¼Œä¸º

$$
R_s = \cfrac{R_1+R_2+R_3}{3}\times\cfrac{1}{2}
$$

#### 3.1.3 ç”µæºæµ‹é‡

ä½¿ç”¨ç›´æµç”µæºæµ‹é‡æ—¶ï¼Œå¯ä»¥å°†ç”µæºç”µæµé™åˆ¶åˆ°ç”µæœºé¢å®šç”µæµçš„10%ï¼Œç„¶åæ¥ç”µæœºçš„ä»»æ„ä¸¤ç›¸ï¼Œé€šè¿‡è§‚æµ‹ç›´æµç”µæºè¾“å‡ºçš„ç”µå‹ç”µæµæ¥é€šè¿‡æ¬§å§†å®šå¾‹è®¡ç®—å‡ºç”µæœºçš„ç”µé˜»é˜»å€¼ç›¸ç”µé˜»ã€‚

![æ— æ ‡é¢˜](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/%E6%97%A0%E6%A0%87%E9%A2%98.png)

ä¸ºäº†æé«˜æµ‹é‡ç²¾åº¦ï¼Œä¹Ÿå¯ä»¥åƒä¸‡ç”¨è¡¨æµ‹é‡ä¸€æ ·ï¼Œåˆ†åˆ«æ¥ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ã€‚

ä¸‰ç›¸ç”µæœºçš„ç­‰æ•ˆç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚$R_a$ã€$R_b$ã€$R_c$ åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µé˜»ï¼Œ$L_a$ã€$L_b$ã€$L_c$åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µæ„Ÿã€‚

![](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009151333270.png)

å‡è®¾ç”µæºåˆ†åˆ«æ¥ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ï¼Œ3æ¬¡æµ‹å¾—çš„é˜»å€¼åˆ†åˆ«ä¸º$V_1ã€I_1$ã€$V_2ã€I_3$ã€$V_3ã€I_3$ï¼Œé‚£ä¹ˆï¼š
$$
\begin{cases}
R_1 = U_1/I_1\\
R_2 = U_2/I_2\\
R_3 = U_3/I_3
\end{cases}
$$

å‡å®šç”µæœºçš„ä¸‰ç›¸å¯¹ç§°ï¼Œç”µé˜»å€¼ç›¸ç­‰ï¼Œæµè¿‡çš„ç”µæµç›¸åŒï¼Œå¯ä»¥å¾—å‡ºç”µæœºçš„ç›¸ç”µé˜» $R_S$ï¼Œä¸º

$$
R_s = \cfrac{R_1+R_2+R_3}{3}
$$

### 3.2 ç›¸ç”µæ„Ÿ

#### 3.2.1 ç”µæ¡¥æµ‹é‡

ç›¸ç”µæ„Ÿä½¿ç”¨ç”µæ¡¥æµ‹é‡æ—¶ï¼šå°†é¢‘ç‡è®¾ä¸º 1kHzï¼Œç”µå‹è®¾ä¸º1Vï¼Œç„¶åç”¨ç”µæ¡¥çš„ä¸¤æ”¯è¡¨ç¬”æ¥ç”µæœºçš„ä»»æ„ä¸¤ç›¸ï¼Œæ‰€å¾—åˆ°é˜»å€¼çš„ä¸€åŠå°±æ˜¯ç›¸ç”µé˜»ã€‚

![image-20231009152626377](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009152626377.png)

ä¸ºäº†æé«˜æµ‹é‡ç²¾åº¦ï¼Œä¹Ÿå¯ä»¥åƒä¸‡ç”¨è¡¨æµ‹é‡ä¸€æ ·ï¼Œåˆ†åˆ«æµ‹ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ã€‚

ä¸‰ç›¸ç”µæœºçš„ç­‰æ•ˆç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚$R_a$ã€$R_b$ã€$R_c$ åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µé˜»ï¼Œ$L_a$ã€$L_b$ã€$L_c$åˆ†åˆ«ä¸ºæ¯ç›¸çš„ç­‰æ•ˆç”µæ„Ÿã€‚

![](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009151333270.png)

å‡è®¾ç”µæ¡¥çš„ä¸¤æ”¯è¡¨ç¬”åˆ†åˆ«æ¥ç”µæœºä¸‰ç›¸ä¸­çš„ä»»æ„ä¸¤ç›¸ï¼Œ3æ¬¡æµ‹å¾—çš„é˜»å€¼åˆ†åˆ«ä¸º $L_1$ã€$L_2$ã€$L_3$ï¼Œé‚£ä¹ˆï¼š
$$
\begin{cases}
L_1 = L_a+L_b\\
L_2 = L_a+L_c\\
L_3 = L_b+L_c
\end{cases}
$$

å‡å®šç”µæœºçš„ä¸‰ç›¸å¯¹ç§°ï¼Œç”µæ„Ÿå€¼ç›¸ç­‰ï¼Œå³$L_a=L_b=L_c$ åˆ†ï¼Œå¯ä»¥å¾—å‡ºç”µæœºçš„ç›¸ç”µé˜» $L_S$ï¼Œä¸º

$$
L_s = \cfrac{L_1+L_2+L_3}{3}\times\cfrac{1}{2}
$$

#### 3.2.3 d-q è½´ç”µæ„Ÿè®¡ç®—

æ— åˆ·ç›´æµç”µæœºæ§åˆ¶æœ‰æ—¶å€™éœ€è¦ç²¾ç¡®åœ°è·å–d-qè½´çš„ç­‰æ•ˆç”µæ„Ÿï¼Œæ­¤æ—¶å¯ä»¥å€ŸåŠ© d-q è½´ç­‰æ•ˆç”µå‹æ–¹ç¨‹æ¥è®¡ç®—ï¼š

$$
\begin{cases}
u_d = R_si_d + L_d\cfrac{d}{d_t}i_d-\omega_eL_qi_q\\
u_q = R_si_q + L_q\cfrac{d}{d_t}i_q+\omega_e(L_di_d+\psi_f)
\end{cases}
$$

å½“ç”µæœºå¤„äºç¨³æ€æ—¶ï¼ŒåŠ¨æ€å¾®åˆ†é¡¹ä¸º0,ä¸Šå¼å¯ä»¥ç®€åŒ–ä¸ºï¼š

$$
\begin{cases}
u_d = R_si_d-\omega_eL_qi_q\\
u_q = R_si_q+\omega_e(L_di_d+\psi_f)
\end{cases}
$$

ç”±æ­¤å¯ä»¥è®¡ç®—å‡º d-qè½´ çš„ç­‰æ•ˆç”µæ„Ÿï¼š

$$
\begin{cases}

L_d = \cfrac{u_q-R_si_q-p_n\omega_e\psi_f}{p_n\omega i_d}\\
L_q = \cfrac{R_si_d-u_d}{p_n\omega i_q}
\end{cases}
$$

+ $u_d$ã€$u_q$ï¼šd-q è½´ç”µå‹

+ $i_d$ã€$i_q$ï¼šd-q è½´ç”µæµ
+ $\omega_e$ï¼šç”µè§’é€Ÿåº¦
+ $\omega$ï¼šæœºæ¢°è½¬é€Ÿ
+ $p_n$ï¼šæå¯¹æ•°
+ $\psi_f$ï¼šæ°¸ç£ä½“ç£é“¾
+ $R_s$ï¼š ç›¸ç”µé˜»

### 3.3 æå¯¹æ•°

#### 3.3.1 ç¤ºæ³¢å™¨æµ‹é‡

ç”¨ç¤ºæ³¢å™¨æ¢å¤´ä¸€æ ¹çº¿å¤¹ä½ç”µæœºä¸€æ ¹çº¿ï¼Œå¦ä¸€æ ¹ç”¨æ¢å¤´æµ‹ï¼Œç„¶åæ—‹è½¬ç”µæœºä¸€åœˆï¼Œä¼šåœ¨ç¤ºæ³¢å™¨ä¸Šè¿ç»­å‡ºç°å¯¹åº”æ­£å¼¦æ³¢å½¢ï¼Œç„¶åæ•°ä¸€ä¸‹æ³¢å³°ä¸ªæ•°ï¼Œä¸ºå¶æ•°å€¼å†é™¤ä»¥2ï¼Œå°±æ˜¯ç”µæœºçš„æå¯¹æ•°ã€‚

#### 3.3.2 ç”µæºæµ‹é‡

ä½¿ç”¨ç›´æµç”µæºæµ‹é‡æ—¶ï¼Œå¯ä»¥å°†ç”µæºç”µæµé™åˆ¶åˆ°ç”µæœºé¢å®šç”µæµçš„10%ï¼Œç„¶åæ¥ç”µæœºçš„ä»»æ„ä¸¤ç›¸ï¼Œä¹Ÿå¯ä»¥å°†ç”µæµç¼“æ…¢å¾€ä¸ŠåŠ ã€‚

+ æ‰‹åŠ¨è½¬åŠ¨è½¬å­ï¼Œä»¥ä¾¿è®©è½¬å­è½¬å‘åœ¨ä¸€ä¸ªç¨³å®šçš„è§’åº¦ä½ç½®ï¼Œè¿™ä¸ªè§’åº¦ä½ç½®ä¹Ÿæ˜¯ç”µè§’åº¦é›¶ç‚¹ã€‚
+ ç„¶ååœ¨è½¬å­è½¬åŠ¨åçš„ç¨³å®šä½ç½®åšä¸ªæ ‡è®°ã€‚
+ è½¬å­æå¯¹æ•°å³ç­‰äºç¨³å®šä½ç½®çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯æ„Ÿè§‰é¡¿äº†å‡ æ¬¡ï¼Œæå¯¹æ•°å°±æ˜¯é¡¿çš„æ¬¡æ•°ã€‚

### 3.4 åç”µåŠ¨åŠ¿æµ‹é‡

ç¤ºæ³¢å™¨æ¢å¤´æ¥ä¸€ç›¸ï¼Œåœ°æ¥ç”µæœºå¦å¤–ä¸¤ç›¸ä»»æ„ä¸€ç›¸ï¼Œè½¬åŠ¨ç”µæœºæµ‹å‡ºåç”µåŠ¨åŠ¿æ³¢å½¢ï¼Œå–ä¸­é—´ä¸€ä¸ªæ³¢å½¢ï¼Œæµ‹é‡å…¶å³°å³°å€¼å’Œé¢‘ç‡

$$
K_e = 1000\times P\times\cfrac{Vpp}{2\times1.73\times60\times f} \\
K_e = \sqrt3 \omega_e\psi_f
$$

+ $K_e$ï¼šåç”µåŠ¨åŠ¿
+ $p_n$ï¼šæå¯¹æ•°
+ $V_{pp}$ï¼šå³°å³°å€¼
+ $f$ï¼šé¢‘ç‡
+ $\omega_e$ï¼šè§’é€Ÿåº¦
+ $\psi_f$ï¼šç£é“¾

### 3.5 ç£é“¾

ç£é“¾æ˜¯ç”µæœºå†…éƒ¨çš„ç£åœºåˆ†å¸ƒ
$$
\psi_f = \cfrac{K_e}{\sqrt3\omega_e} \\
\psi_f = \cfrac{u_q - R_si_q-\omega_e L_di_d}{\omega_e}
$$

+ $K_e$ï¼šåç”µåŠ¨åŠ¿
+ $\omega_e$ï¼šç”µè§’é€Ÿåº¦
+ $\psi_f$ï¼šç£é“¾

### 3.6 è½¬çŸ©å¸¸æ•°

è½¬çŸ©å¸¸æ•°ä¸ç”µæœºçš„è®¾è®¡å’Œæ„é€ æœ‰å…³ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨è½¬çŸ©å¸¸æ•°æ¥è®¡ç®—æ‰€éœ€çš„ç”µæµï¼Œä»¥è¾¾åˆ°æœŸæœ›çš„ç”µæœºè½¬çŸ©è¾“å‡º
$$
K_t = 1.5\psi_f p_nK_t = 1.5\psi_f p_n
$$

+ $K_t$ï¼šè½¬çŸ©å¸¸æ•°
+ $p_n$ï¼šæå¯¹æ•°
+ $\psi_f$ï¼šç£é“¾

### 3.7 è½¬åŠ¨æƒ¯é‡

ç”µæœºåŠ å‡é€Ÿæ§åˆ¶å¸¸å¸¸ä¼šæ¶‰åŠè½¬åŠ¨æƒ¯é‡çš„æµ‹é‡ã€‚è½¬åŠ¨æƒ¯é‡æ˜¯ä¸€ç§è¡¨å¾åˆšä½“è½¬åŠ¨æƒ¯æ€§å¤§å°çš„ç‰©ç†é‡ï¼Œä¸åˆšä½“çš„è´¨é‡ã€è´¨é‡ç›¸å¯¹äºè½¬è½´çš„åˆ†å¸ƒç­‰æœ‰å…³ã€‚

è½¬åŠ¨æƒ¯é‡å¯¹æ•´ä¸ªæ— åˆ·ç”µæœºæ§åˆ¶ç³»ç»Ÿçš„ç²¾åº¦ã€ç¨³å®šæ€§ä»¥åŠåŠ¨æ€å“åº”éƒ½æœ‰å¾ˆå¤§çš„å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨é¢‘ç¹çš„æ­£åè½¬åˆ‡æ¢ã€åŠ å‡é€Ÿè¿‡ç¨‹ä¸­ï¼Œè½¬åŠ¨æƒ¯é‡çš„å½±å“éå¸¸æ˜æ˜¾ã€‚

å°æƒ¯é‡çš„ç”µæœºå¯åŠ¨å¾ˆå¿«ï¼Œåˆ¶åŠ¨æ€§èƒ½ä¹Ÿå¥½ï¼Œé¢‘ç¹åŠ å‡é€Ÿå“åº”å¿«ï¼Œé€‚åˆè½»è´Ÿè½½ã€é«˜è½¬é€Ÿçš„åœºåˆã€‚ä½†æ˜¯ï¼Œå¦‚æœè´Ÿè½½å¾ˆå¤§ï¼Œç”µæœºæƒ¯é‡å¾ˆå°ï¼Œé‚£ä¹ˆç”µæœºè½´å°±å®¹æ˜“å—æŸï¼Œå› æ­¤ç”µæœºçš„è½¬åŠ¨æƒ¯é‡è¦ä¸æŠ˜ç®—åˆ°ç”µæœºè½´çš„è´Ÿè½½æƒ¯é‡å°½é‡åŒ¹é…ï¼Œè¿‡å¤§ã€è¿‡å°éƒ½ä¸åˆé€‚ã€‚

#### 3.7.1 è‡ªå‡é€Ÿæ³•

ä»¥é¢å®šåŠ±ç£ç”µæµé©±åŠ¨ç”µæœºï¼Œå½“è½¬é€Ÿé«˜äºé¢å®šè½¬é€Ÿæ—¶ï¼Œè®©ç”µæœºç©ºè½½è¿è½¬ã€‚ç­‰ç”µæœºå¹³ç¨³åè¿…é€Ÿåˆ‡æ–­ç”µæœºç”µæºï¼Œç”µæœºåœ¨æƒ¯æ€§çŠ¶æ€ä¸‹ä¼šç»§ç»­è¿è¡Œï¼Œå¹¶è‡ªç„¶å‡é€Ÿï¼Œæµ‹é‡ç”µæœºçš„å‡é€Ÿæ›²çº¿ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ç”µæœºçš„è½¬åŠ¨æƒ¯é‡å¯ä»¥ç”±ä¸‹å¼è®¡ç®—ï¼š
$$
J=\cfrac{P}{4\times1.37\times\cfrac{n^2_1-n^2_2}{t_2-t_1}}\times10^6
$$
![image-20231009173604796](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231009173604796.png)

## 4. Field Oriented Control

### 4.1 çŸ¢é‡æ§åˆ¶æ¶æ„

çŸ¢é‡æ§åˆ¶æ¶æ„å¦‚å›¾æ‰€ç¤ºï¼šç”µæµç¯å¤–éƒ¨æ˜¯é€Ÿåº¦ç¯ï¼Œé€šè¿‡å®‰è£…åœ¨ç”µæœºåº•éƒ¨çš„ä½ç½®ä¼ æ„Ÿå™¨æˆ–è€…æ— æ„Ÿè§‚æµ‹å™¨ç®—æ³•è·å¾—è½¬å­ä½ç½®ä¿¡æ¯ï¼Œå¹¶è®¡ç®—åé¦ˆé€Ÿåº¦ï¼Œä¸ç»™å®šé€Ÿåº¦è¿›è¡Œæ¯”è¾ƒï¼Œå°†ç»“æœé€å…¥é€Ÿåº¦ PI æ§åˆ¶å™¨ï¼Œæ§åˆ¶è½¬çŸ©ç”µæµè¾“å‡ºã€‚ä¹‹åï¼Œè½¬çŸ©ç”µæµè¿›å…¥ç”µæµç¯è½¬çŸ©PIæ§åˆ¶å™¨ï¼Œä»¥ä¾¿è¾“å‡º d-q è½´ç”µå‹ã€‚è¿™ä¸ªç”µå‹æ˜¯æ— æ³•ç›´æ¥é©±åŠ¨ç”µæœºçš„ï¼Œå› æ­¤éœ€è¦å°† d-q ä¸¤ç›¸æ—‹è½¬åæ ‡ç³»ä¸‹çš„ç”µå‹ç»è¿‡ Park åå˜æ¢ä»¥åŠ Clarke åå˜æ¢ï¼Œå˜æ¢ä¸º A-B-C ä¸‰ç›¸é™æ­¢åæ ‡ç³»ä¸‹çš„ç”µå‹ï¼Œä»¥é©±åŠ¨ä¸‰ç›¸ç”µæœºã€‚

çŸ¢é‡æ§åˆ¶çš„æ•´ä½“æµç¨‹æ€»ç»“å¦‚ä¸‹ï¼š

+ åˆ©ç”¨ ADC æµ‹é‡åˆ†æµç”µé˜»çš„ç”µå‹å€¼ï¼Œå¹¶é€šè¿‡ç›¸ç”µæµé‡æ„è½¬æ¢æˆä¸‰ç›¸ç”µæµå€¼ã€‚æ ¹æ®åŸºå°”éœå¤«ç”µæµå®šå¾‹ï¼ŒåŒä¸€æ—¶åˆ»æµå…¥æŸä¸€èŠ‚ç‚¹çš„ç”µæµç­‰äºæµå‡ºè¯¥èŠ‚ç‚¹çš„ç”µæµï¼Œå› æ­¤ï¼ŒåŒä¸€æ—¶åˆ»åªéœ€é‡‡é›†ä¸‰ç›¸ç”µæµä¸­çš„ä¸¤ç›¸å³å¯é‡æ„å‡ºä¸‰ç›¸ç”µæµã€‚
+ å°†é‡‡é›†åˆ°çš„ç”µæµå€¼è¿›è¡Œ **Clarke** ä¸ **Park** å˜æ¢ï¼Œæœ€ç»ˆå¾—åˆ°d-qè½´ç”µæµã€‚
+ åˆ©ç”¨ä½ç½®ä¼ æ„Ÿå™¨æˆ–è€…è§’åº¦ä¼°ç®—å™¨è®¡ç®—è½¬å­ç”µè§’åº¦å’Œè½¬å­è§’é€Ÿåº¦ã€‚
+ æ¯”è¾ƒç›®æ ‡é€Ÿåº¦ä¸å®é™…åé¦ˆé€Ÿåº¦ï¼Œå°†ç»“æœé€å…¥**é€Ÿåº¦ PI**æ§åˆ¶å™¨è¿›è¡Œé€Ÿåº¦æ§åˆ¶ï¼Œä»¥è¾“å‡ºç”µæµç¯éœ€è¦çš„igã€iac
+ å°†é€Ÿåº¦ç¯è¾“å‡ºçš„ç”µæµå€¼é€å…¥**ç”µæµ** **P**I æ§åˆ¶å™¨ï¼Œä»¥è¾“å‡ºéœ€è¦çš„ç”µå‹å€¼ $v_dã€v_q$ã€‚
+ å¯¹ d-q è½´çš„ç”µå‹å€¼è¿›è¡Œ**åæ ‡åå˜æ¢**ä»¥åŠ **SVPWM**ï¼Œæœ€ç»ˆå¾—åˆ°PWMå ç©ºæ¯”ï¼Œæ§åˆ¶é€†å˜å™¨è¾“å‡ºã€‚

æ‰€ä»¥çŸ¢é‡æ§åˆ¶éœ€è¦ç›´æ¥æˆ–è€…é—´æ¥çš„å¾—åˆ°ï¼š

+ ä¸‰ç›¸ç”µæµ
+ ç”µæœºè§’åº¦ï¼ˆæ— æ„Ÿä¼°ç®—ã€æœ‰æ„Ÿï¼‰

![image-20231008102220792](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231008102220792.png)

### 4.2 åæ ‡å˜æ¢

#### 4.2.1 Clarke å˜æ¢

Clarke å˜æ¢å°±æ˜¯å°† A-B-C ä¸‰ç›¸é™æ­¢åæ ‡ç³»å˜æ¢åˆ° a-Î² ä¸¤ç›¸é™æ­¢åæ ‡ç³»çš„è¿‡ç¨‹ã€‚

Clarke å˜æ¢å¦‚å›¾æ‰€ç¤ºã€‚

![image-20231010100100109](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010100100109.png)
$$
\begin{cases}
i_\alpha = i_a \\
i_\beta = (i_b-i_c)\times\cfrac{\sqrt{3}}{3}
\end{cases}
$$

#### 4.2.2 Park å˜æ¢

Park å˜æ¢å°±æ˜¯å°† Î±-Î² è½´å†³å®šçš„ä¸¤ç›¸é™æ­¢åæ ‡ç³»å˜æ¢ä¸ºéšç£åœºæ—‹è½¬çš„ d-q åæ ‡ç³»ã€‚

Park å˜æ¢å¦‚å›¾æ‰€ç¤ºã€‚

![image-20231010095949669](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010095949669.png)

$$
\begin{cases}
i_d = i_\alpha cos\theta+i_\beta sin\theta \\
i_q = -i_\alpha sin\theta+i_\beta cos\theta
\end{cases}
$$

ä¸‹å›¾å½¢è±¡çš„è¡¨ç¤ºäº† Clarke å˜æ¢å’Œ Park å˜æ¢åçš„æ³¢å½¢ï¼š

![image-20231010100134774](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010100134774.png)

#### 4.2.3 Park é€†å˜æ¢

çŸ¢é‡æ§åˆ¶çš„æœ€åä¸€ä¸ªç¯èŠ‚è¦å°†ç”µæµç¯è¾“å‡ºçš„ $v_dã€v_q$ è¿›è¡Œåæ ‡åå˜æ¢ï¼Œå½¢æˆä¸‰ç›¸ç”µæœºæ‰€éœ€è¦çš„ç”µå‹å€¼ï¼Œç„¶åé€åˆ°svpwmæˆ–è€…spwmä¸­å»ã€‚

Park åå˜æ¢å°±æ˜¯å°†ä¸¤ç›¸æ—‹è½¬åæ ‡ç³»ä¸‹çš„ $v_dã€v_q$ å˜æ¢æˆ a-Î² ä¸¤ç›¸é™æ­¢åæ ‡ç³»çš„ $v_\alphaã€v_\beta$

![image-20231010100217422](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010100217422.png)

$$
\begin{cases}
v_\alpha = v_d cos\theta-v_q sin\theta \\
v_\beta = v_d sin\theta+v_q cos\theta
\end{cases}
$$

#### 4.2.4 Clarke é€†å˜æ¢

Clarke é€†å˜æ¢å°±æ˜¯å°† a-Î² ä¸¤ç›¸é™æ­¢åæ ‡ç³»å˜æ¢åˆ° A-B-C ä¸‰ç›¸é™æ­¢åæ ‡ç³»çš„è¿‡ç¨‹ã€‚

è¿™ç§æƒ…å†µä¸‹å¾—å‡ºçš„ä¸‰ç›¸ç”µå‹å°±æ˜¯ä¸‰ä¸ªç›¸å·®120Â°çš„æ­£å¼¦æ³¢ï¼Œå¯ç›´æ¥ç”¨äºç”µæœºçš„æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè°æ³¢æ³¨å…¥å¼svpwmçš„è¾“å…¥ï¼Œè¯¥svpwmè°ƒåˆ¶æ–¹æ³•ä¹Ÿè¢«å«åšä¸­ç‚¹å¹³ç§»æ³•
$$
\begin{cases}
u_a = u_\beta \\
u_b = (-u_\alpha+\sqrt3u_\beta)/2\\
u_c = (-u_\alpha-\sqrt3u_\beta)/2
\end{cases}
$$

### 4.3 SVPWM

#### 4.3.1 SVPWM åŸç†

SVPWMçš„å…¨ç§°æ˜¯Space Vector Pulse Width Modulation,å³ç©ºé—´çŸ¢é‡è„‰å®½è°ƒåˆ¶ã€‚å®ƒé€šè¿‡ä¸‰ç›¸é€†å˜å™¨çš„6ä¸ªåŠŸç‡ç®¡è¾“å‡ºéšæ—¶é—´å˜åŒ–çš„PWMæ³¢ï¼Œæ¨¡æ‹Ÿä¸‰ç›¸å¯¹ç§°æ­£å¼¦ç”µæµå½¢æˆçš„ç”µå‹çŸ¢é‡åœ†ï¼Œäº§ç”Ÿæ¥è¿‘åœ†å½¢çš„ç£é“¾è½¨è¿¹ã€‚

SVPWMåˆ©ç”¨å¹³å‡å€¼ç­‰æ•ˆåŸç†ï¼Œåœ¨ä¸€ä¸ªå¼€å…³å‘¨æœŸå†…ï¼Œå¯¹åŸºç¡€çŸ¢é‡åŠ ä»¥ç»„åˆï¼Œäº§ç”Ÿä¸æœŸæœ›ç”µå‹çŸ¢é‡ç›¸åŒçš„æ•ˆæœã€‚æ ¹æ®ç”µå‹çŸ¢é‡çš„ä¸åŒåˆ¤æ–­å…¶æ‰€åœ¨çš„æ‰‡åŒºåŒºé—´ï¼Œå¹¶åˆ©ç”¨ç›¸åº”æ‰‡åŒºçš„åŸºç¡€çŸ¢é‡ä¸æ–­åˆæˆéœ€è¦çš„ç”µå‹çŸ¢é‡ã€‚è¿™æ ·ï¼Œç”µå‹çŸ¢é‡è½¬åŠ¨ä¸€åœˆï¼Œå³åœ¨ç©ºé—´ä¸Šå½¢æˆä¸€ä¸ªæ—‹è½¬çš„è¿‘ä¼¼åœ†å½¢çš„ç£åœºã€‚å›¾4.1æ‰€ç¤ºä¸ºå…¸å‹çš„ä¸‰ç›¸é€†å˜å™¨é©±åŠ¨ç”µè·¯ã€‚

$Qâ‚~Qâ‚†$ä¸ºä¸‰ç›¸é€†å˜å™¨çš„6ä¸ªåŠŸç‡ç®¡ã€‚åŒä¸€æ—¶åˆ»ï¼ŒåŒä¸€æ¡¥è‡‚ä¸Šä¸‹ä¸¤ä¸ªåŠŸç‡ç®¡ä¸èƒ½åŒæ—¶å¼€é€šï¼Œå¦åˆ™ä¼šé€ æˆç”µæºçŸ­è·¯ã€‚

å› æ­¤ï¼Œä¸€èˆ¬è¦åœ¨äº’è¡¥PWMæ³¢ä¸­åŠ å…¥æ­»åŒºï¼Œé˜²æ­¢çŸ­è·¯é€ æˆå±å®³ã€‚

ç”±äºä¸Šä¸‹ä¸¤ä¸ªåŠŸç‡ç®¡å¿…é¡»äº’è¡¥æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸Šæ¡¥è‡‚åŠŸç‡ç®¡çš„çŠ¶æ€è¡¨ç¤ºè¯¥æ¡¥è‡‚å¯¹åº”çš„é‚£ä¸€ç›¸çš„çŠ¶æ€ã€‚åªæœ‰å½“ä¸Šæ¡¥è‡‚å¼€é€šåï¼Œå¯¹åº”çš„é‚£ä¸€ç›¸ä¸ç”µæºçš„æ­£æè¿é€šï¼Œè¯¥ç›¸æ‰æœ‰æ­£å‘ç”µæµæµè¿‡ã€‚å¦‚æœä¸‹æ¡¥è‡‚å¼€é€šï¼Œåˆ™è¯¥ç›¸ç›´æ¥ä¸ç”µæºçš„è´Ÿæè¿æ¥ï¼Œç”µæµä»ç”µæœºçš„ç«¯çº¿æµå‡ºï¼Œé€šè¿‡ä¸‹æ¡¥è‡‚çš„åŠŸç‡ç®¡è¿›å…¥ç”µæºçš„è´Ÿæã€‚

![image-20231010145759844](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010145759844.png)

æ¯”å¦‚ï¼ŒQâ‚å¼€é€šã€Qâ‚‚å…³æ–­ï¼Œç”µæµä¼šä»DC+ç»Qâ‚æµå…¥ç”µæœºçš„Aç›¸ï¼›Qâ‚å…³æ–­ã€Qâ‚‚å¼€é€šï¼Œç”µæµä¼šä»ç”µæœºçš„Aç›¸æµå‡ºï¼Œç»Qâ‚‚æµå…¥ç”µæºçš„DC-ã€‚

å‡å®šä¸Šæ¡¥è‡‚å¼€é€šï¼Œä¸‹æ¡¥è‡‚å…³æ–­ï¼Œå°†è¯¥æ¡¥è‡‚çš„çŠ¶æ€è®°ä¸º1,åä¹‹è®°ä¸º0ã€‚å› ä¸ºæœ‰3ä¸ªæ¡¥è‡‚ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰å¼€å…³å‡½æ•°$S_x(x=a,b,c)$ä¸ºï¼š
$$
S_x=\begin{cases}
1-ä¸Šæ¡¥è‡‚å¼€é€šï¼Œä¸‹æ¡¥è‡‚å…³æ–­ \\
0-ä¸Šæ¡¥è‡‚å…³æ–­ï¼Œä¸‹æ¡¥è‡‚å¼€é€š
\end{cases}
$$
äºæ˜¯ï¼Œ3ä¸ªæ¡¥è‡‚çš„çŠ¶æ€å¯ä»¥æœ‰$2Â³=8$ç§ï¼Œä¹Ÿå°±æ˜¯ Aã€Bã€C ä¸‰ç›¸å…±æœ‰8ç§çŠ¶æ€ç»„åˆã€‚

å‡è®¾ä¸€ç§çŠ¶æ€ç»„åˆä¸º A ç›¸ä¸Šæ¡¥è‡‚å¼€é€šï¼Œä¸‹æ¡¥è‡‚å…³æ–­ï¼ŒAç›¸ç›´æ¥è¿æ¥åˆ°ç”µæºçš„æ­£æï¼›B ç›¸ä¸Šæ¡¥è‡‚å…³æ–­ï¼Œä¸‹æ¡¥è‡‚å¼€é€šï¼ŒB ç›¸ç›´æ¥è¿æ¥åˆ°ç”µæºçš„è´Ÿæï¼›C ç›¸ä¸Šæ¡¥è‡‚å…³æ–­ï¼Œä¸‹æ¡¥è‡‚å¼€é€šï¼ŒC ç›¸ç›´æ¥è¿æ¥åˆ°ç”µæºçš„è´Ÿæã€‚ä¹Ÿå°±æ˜¯è¯´ $S_a=1ã€S_b=0ã€S_c=0$ï¼Œæ­¤æ—¶çš„ç­‰æ•ˆç”µè·¯å¦‚å›¾æ‰€ç¤ºã€‚

![image-20231010152317941](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010152317941.png)

æ‰€ä»¥ç”¨ $U_aã€U_bã€U_c$ è¡¨ç¤ºå„ç›¸çš„ç›¸ç”µå‹ï¼Œä¹Ÿå°±æ˜¯å„ç›¸ç›¸å¯¹äºç”µæœºä¸­æ€§ç‚¹Nçš„ç”µå‹ï¼š
$$
\begin{cases}
U_a = U_A-U_N \\
U_b = U_B-U_N \\
U_c = U_C-U_N
\end{cases}
$$
é‚£ä¹ˆåœ¨$S_x(x=a,b,c)$çš„çŠ¶æ€ä¸º 100 æ—¶ï¼ŒB ç›¸ä¸ C ç›¸ç›¸å½“äºå¹¶è”åå†ä¸ A ç›¸ä¸²è”ï¼Œæ ¹æ®è¿™ä¸ªç­‰æ•ˆç”µè·¯å¯ä»¥æ¨å‡ºï¼š
$$
\begin{cases}
U_a = \cfrac{2}{3}U_{dc} \\
U_b = -\cfrac{1}{3}U_{dc}  \\
U_c = -\cfrac{1}{3}U_{dc}
\end{cases}
$$
å°†ä¸Šé¢è®¡ç®—çš„å€¼ï¼Œä»£å…¥ä¸‰ç›¸å¯¹ç§°æ­£å¼¦ç”µå‹çŸ¢é‡åˆæˆçš„å…¬å¼ï¼š
$$
U_{out}=\cfrac{2}{3}(U_a+U_be^{j\cfrac{2\pi}{3}}+U_ce^{-j\cfrac{2\pi}{3}})
$$
å‰é¢çš„ç³»æ•°$\cfrac{2}{3}$æ˜¯ä¸ºäº†ä¿è¯å˜åŒ–å‰åå¹…å€¼ä¸å˜åŸåˆ™ï¼Œå› æ­¤å¯ä»¥å¾—å‡ºï¼š
$$
U_{out}=\cfrac{2}{3}[\cfrac{2}{3}U_{dc}-\cfrac{1}{3}U_{dc}(cos\cfrac{2\pi}{3}+jsin\cfrac{2\pi}{3})-\cfrac{1}{3}U_{dc}(cos\frac{2\pi}{3}-jsin\cfrac{2\pi}{3})]
$$

æ•´ç†å¾—ï¼š
$$
U_{out}=\cfrac{2}{3}U_{dc}=\cfrac{2}{3}U_{dc^{j_0}}
$$
åŒç†å¯ä»¥æ¨å‡ºå…¶ä»–çŠ¶æ€ä¸‹çš„ç›¸ç”µå‹ï¼Œå¹¶æ ¹æ®ä¸‰ç›¸åˆæˆçš„å…¬å¼æ¨å‡ºåˆæˆçŸ¢é‡çš„å¤§å°å’Œæ–¹å‘ï¼Œä»ä¸Šé¢çš„è®¡ç®—å¯ä»¥çœ‹å‡ºï¼ŒåˆæˆçŸ¢é‡å¯ä»¥è¡¨ç¤ºæˆ$U_{out}=\cfrac{2}{3}U_{dc}e^{\omega_et}ï¼Œ\omega_e=2\pi f$ï¼Œ6ä¸ªåŸºç¡€çŸ¢é‡çš„æ¨¡é•¿ç­‰å€¼ï¼Œå‡ä¸º $\cfrac{2}{3}U_{dc}$ã€‚

å°†ä¸Šé¢çš„ 8 ä¸ªçŸ¢é‡æ”¾åˆ°çŸ¢é‡åˆ†å¸ƒå›¾ä¸­ï¼Œçº¢è‰²ä¸º A-B-C ä¸‰ç›¸ç©ºé—´é™æ­¢åæ ‡ç³»ã€‚

![image-20231010175715816](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231010175715816.png)

$Uâ‚€(100)$ è¡¨ç¤º A ç›¸ä¸Šæ¡¥è‡‚å¼€é€šï¼ŒA ç›¸ç›´æ¥è¿æ¥åˆ°ç”µæºçš„æ­£æï¼›Bç›¸å’ŒCç›¸ä¸‹æ¡¥è‡‚å¼€é€šï¼ŒBç›¸å’ŒCç›¸ç›´æ¥è¿æ¥åˆ°ç”µæºçš„è´Ÿæã€‚æ­¤æ—¶èµ·ä½œç”¨çš„æ˜¯Aç›¸ï¼Œå› æ­¤è¯¥çŸ¢é‡ä¸Aè½´é‡åˆï¼Œ$Uâ‚€(100)$ ä¸­çš„ä¸‹æ ‡â€œ0â€è¡¨ç¤ºå…¶åœ¨çŸ¢é‡åœ†ä¸­çš„ä½ç½®ä¸º0Â°ã€‚

|      çŸ¢é‡      | $S_1$ | $S_2$ | $S_3$ | $A$  | $B$  | $C$  |         $U_a$         |         $U_b$         |         $U_c$         |                 $U_{out}$                  |
| :------------: | :---: | :---: | :---: | :--: | :--: | :--: | :-------------------: | :-------------------: | :-------------------: | :----------------------------------------: |
|   $U_z(000)$   |   0   |   0   |   0   |  0   |  0   |  0   |           0           |           0           |           0           |                     0                      |
|   $U_0(100)$   |   1   |   0   |   0   |  1   |  0   |  0   | $\cfrac{2}{3}U_{dc}$  | $-\cfrac{1}{3}U_{dc}$ | $-\cfrac{1}{3}U_{dc}$ |            $\cfrac{2}{3}U_{dc}$            |
| $U_{60}(110)$  |   1   |   1   |   0   |  1   |  1   |  0   | $\cfrac{1}{3}U_{dc}$  | $\cfrac{1}{3}U_{dc}$  | $-\cfrac{2}{3}U_{dc}$ | $\cfrac{2}{3}U_{dc}e^{{j\cfrac{\pi}{3}}}$  |
| $U_{120}(010)$ |   0   |   1   |   0   |  0   |  1   |  0   | $-\cfrac{1}{3}U_{dc}$ | $\cfrac{2}{3}U_{dc}$  | $-\cfrac{1}{3}U_{dc}$ | $\cfrac{2}{3}U_{dc}e^{{j\cfrac{2\pi}{3}}}$ |
| $U_{180}(011)$ |   0   |   1   |   1   |  0   |  1   |  1   | $-\cfrac{2}{3}U_{dc}$ | $\cfrac{1}{3}U_{dc}$  | $\cfrac{1}{3}U_{dc}$  |       $\cfrac{2}{3}U_{dc}e^{{j\pi}}$       |
| $U_{240}(001)$ |   0   |   0   |   1   |  0   |  0   |  1   | $-\cfrac{1}{3}U_{dc}$ | $-\cfrac{1}{3}U_{dc}$ | $\cfrac{2}{3}U_{dc}$  | $\cfrac{2}{3}U_{dc}e^{{j\cfrac{4\pi}{3}}}$ |
| $U_{300}(101)$ |   1   |   0   |   1   |  1   |  0   |  1   | $\cfrac{1}{3}U_{dc}$  | $-\cfrac{2}{3}U_{dc}$ | $\cfrac{1}{3}U_{dc}$  | $\cfrac{2}{3}U_{dc}e^{{j\cfrac{5\pi}{3}}}$ |
|  $U_{z}(111)$  |   1   |   1   |   1   |  1   |  1   |  1   |           0           |           0           |           0           |                     0                      |

ä¸‹é¢è¿™å¹…å›¾å°±å±•ç¤ºäº†åˆæˆä¸€ä¸ªä»»æ„çŸ¢é‡æ—¶ï¼ˆä½†è¿™å¹…å›¾çš„ä»»æ„çŸ¢é‡åªå±•ç¤ºäº†ä¸åŒæ–¹å‘å´æœªå±•ç¤ºä¸åŒå¤§å°ï¼‰ï¼Œå¯¹åº”çš„ABCä¸‰ç›¸çŸ¢é‡çš„å¤§å°å’Œæ–¹å‘ï¼ˆæ­£æˆ–è´Ÿï¼‰ã€‚é»‘è‰²çš„æ˜¯åˆæˆçŸ¢é‡ï¼Œçº¢è‰²çš„æ˜¯Aç›¸çŸ¢é‡ï¼Œè“è‰²çš„æ˜¯Bç›¸çŸ¢é‡ï¼Œç»¿è‰²çš„æ˜¯Cç›¸çŸ¢é‡ã€‚

![img](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/2817d077ee575e7abd79676bb49636b3.gif)

#### 4.3.2 SVPWM æ‰‡åŒºåˆ¤æ–­æ³•

SVPWM æ‰‡åŒºåˆ¤æ–­æ³•ä¹Ÿæ˜¯ä¸»æµçš„ SVPWM å‘ç”Ÿæ–¹å¼ï¼Œè¿™é‡Œéœ€è¦å¼•å…¥æ‰‡åŒº Sector çš„æ¦‚å¿µï¼Œå°†æ•´ä¸ªå¹³é¢åˆ†ä¸ºå…­ä¸ªæ‰‡åŒºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20231011153111585](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231011153111585.png)

æ‰€ä»¥æ¯ä¸ªæ‰‡åŒºåŒ…å«ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡ï¼Œè½åœ¨æŸä¸ªæ‰‡åŒºçš„ç”µå‹ç©ºé—´çŸ¢é‡å°†ç”±æ‰‡åŒºè¾¹ç•Œçš„ä¸¤ä¸ªåŸºæœ¬ç”µå‹ç©ºé—´çŸ¢é‡è¿›è¡Œåˆæˆã€‚

å‡å®šä½äºæ‰‡åŒºIä¸­çš„æŸä¸ªéé›¶çŸ¢é‡Urer,ä¸å®ƒç›¸é‚»çš„ä¸¤ä¸ªéé›¶çŸ¢é‡ä¸º $Uâ‚€(100)$ å’Œ $Uâ‚†â‚€(110)$ï¼Œå®ƒä»¬ä¹‹é—´çš„å¤¹è§’ä¸º60Â°ï¼ŒåˆæˆçŸ¢é‡ç”± $U_\alphaã€U_\beta$ çš„å¤§å°ç¡®å®šï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![image-20231011150543250](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231011150543250.png)

å› æ­¤åœ¨æ‰‡åŒº $I$ ä¸­æ»¡è¶³ $0<<arctan\cfrac{U_\beta}{U_\alpha}<<\cfrac{\pi}{3}$ï¼Œ çŸ¢é‡è½åœ¨æ‰‡åŒºIçš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ $U_\alpha>0ã€U_\beta>0$ ä¸” $\cfrac{U_\beta}{U_\alpha}<\sqrt3$ ï¼ŒåŒç†ï¼Œå¯ä»¥æ¨å‡ºçŸ¢é‡è½åœ¨å…¶ä»–æ‰‡åŒºçš„å……åˆ†å¿…è¦æ¡ä»¶ã€‚

| æ‰‡   åŒº |                         å……åˆ†å¿…è¦æ¡ä»¶                         |
| :-----: | :----------------------------------------------------------: |
|   $I$   | $U_\alpha>0ã€U_\beta>0$ ä¸” $\cfrac{U_\beta}{U_\alpha}<\sqrt3$ |
|  $II$   |     $U_\beta>0$ ä¸” $\cfrac{U_\beta}{||U_\alpha||}>\sqrt3$      |
|  $III$  | $U_\alpha<0ã€U_\beta>0$ ä¸” $-\cfrac{U_\beta}{U_\alpha}<\sqrt3$ |
|  $IV$   | $U_\alpha<0ã€U_\beta<0$ ä¸” $\cfrac{U_\beta}{U_\alpha}<\sqrt3$ |
|   $V$   |     $U_\beta<0$ ä¸” $-\cfrac{U_\beta}{||U_\alpha||}>\sqrt3$     |
|  $VI$   | $U_\alpha>0ã€U_\beta<0$ ä¸” $-\cfrac{U_\beta}{U_\alpha}<\sqrt3$ |

##### ç”µå‹çŸ¢é‡çš„åˆæˆ

æ‰‡åŒºç¡®å®šä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨æ‰‡åŒºè¾¹ç•Œä¸Šçš„ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡åˆæˆæ‰€éœ€çš„çŸ¢é‡ $u$ï¼Œåœ¨åˆæˆè¿‡ç¨‹ä¸­åº”å½“ä½¿å¾—ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡çš„åˆæˆæ•ˆæœæ¥è¿‘äºæœŸæœ›çŸ¢é‡çš„æ•ˆæœã€‚äºæ˜¯é‡‡ç”¨ä¼ç§’å¹³è¡¡çš„åŸåˆ™ï¼Œä»¥æ‰‡åŒºå›¾æ‰€ç¤ºçš„ç¬¬â…¢æ‰‡åŒºä¸ºä¾‹ï¼Œä»¥ Î±-Î² è½´ä¸ºåŸºå‡†ï¼Œå°†ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡å‘ Î±-Î² è½´ä¸ŠæŠ•å½±ï¼Œåº”å½“æœ‰ï¼š

Î± è½´ï¼š$u_\alpha T=|u_4|T_4+\cfrac{1}{2}|u_6|T_6$

Î² è½´ï¼š$u_\beta T=\cfrac{\sqrt3}{2}|u_6|T_6$

å…¶ä¸­ï¼Œ$T_i$ ä¸ºå¯¹åº”çš„ç”µå‹çŸ¢é‡ $u_i$ ä½œç”¨çš„æ—¶é—´ï¼ˆ$i=0-7$ï¼‰ï¼Œ$T$ ä¸ºé‡‡æ ·å‘¨æœŸï¼Œä¸€èˆ¬æ˜¯PWMçš„è°ƒåˆ¶å‘¨æœŸã€‚

ä¸” $|u_4|=|u_6|=\cfrac{2}{3}U_{dc}$ï¼Œæ‰€ä»¥å¯ä»¥æ±‚å‡º $u_4ï¼Œu_6$ è¿™ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡çš„ä½œç”¨æ—¶é—´ï¼š
$$
\begin{cases}
T_4 = \cfrac{\sqrt3T}{2U_{dc}}(\sqrt3u_\alpha-u_\beta) \\
T_6 = \cfrac{\sqrt3u_\beta T}{2U_{dc}}
\end{cases}
$$
é€šè¿‡ä¸Šé¢çš„æ–¹æ³•å³å¯ä»¥ç¡®å®šåŸºæœ¬çŸ¢é‡çš„ä½œç”¨æ—¶é—´ï¼Œå½“éœ€è¦åˆæˆçš„çŸ¢é‡ä½äºå„ä¸ªä¸åŒçš„æ‰‡åŒºæ—¶éƒ½å­˜åœ¨å¦‚ä¸Šçš„è¿ç®—ã€‚é€šè¿‡å¯¹æ¯ä¸ªé€šè¿‡å¯¹æ¯ä¸ªæ‰‡åŒºåŸºæœ¬çŸ¢é‡åŠ¨ä½œæ—¶é—´çš„æ±‚è§£ä¸éš¾å‘ç°å®ƒä»¬éƒ½æ˜¯ä¸€äº›åŸºæœ¬æ—¶é—´çš„ç»„åˆã€‚æ‰€ä»¥ç»™å‡ºå‡ ä¸ªåŸºæœ¬çš„æ—¶é—´å˜é‡ Xï¼ŒYï¼ŒZã€‚å®šä¹‰ï¼š
$$
\begin{cases}
X = \cfrac{\sqrt3u_\beta T}{U_{dc}} \\
Y = \cfrac{(\sqrt3u_\beta+\cfrac{3}{2}u_\alpha)T}{U_{dc}}\\
Z = \cfrac{(\sqrt3u_\beta-\cfrac{3}{2}u_\alpha)T}{U_{dc}}
\end{cases}
$$
é€šè¿‡è®¡ç®—å¯ä»¥å¾—åˆ°åœ¨æ¯ä¸ªæ‰‡åŒºå†…çš„åŸºæœ¬çŸ¢é‡åŠ¨ä½œæ—¶é—´ï¼Œè®¾æ¯ä¸ªæ‰‡åŒºçš„ä¸¤ä¸ªåŸºæœ¬çŸ¢é‡åŠ¨ä½œçš„æ—¶é—´ä¸ºTâ‚,Tâ‚‚ã€‚äºæ˜¯å¯ä»¥å¾—åˆ°çŸ¢é‡åŠ¨ä½œæ—¶é—´è¡¨ï¼ˆä¸ƒæ®µå¼ï¼‰

|       | $I$  | $II$ | $III$ | $IV$ | $V$  | $VI$ |
| :---: | :--: | :--: | :---: | :--: | :--: | :--: |
| $T_1$ | $Z$  | $Y$  | $-Z$  | $-X$ | $X$  | $-Y$ |
| $T_2$ | $Y$  | $-X$ |  $X$  | $Z$  | $-Y$ | $-Z$ |

ç”±äºæ¯ä¸ªPWMå‘¨æœŸè¢«åˆ†ä¸ºä¸ƒæ®µï¼Œæ‰€ä»¥æ¯ä¸ªçŸ¢é‡çš„åŠ¨ä½œæ—¶é—´ä¹Ÿåº”å½“æœ‰æ‰€è°ƒæ•´ï¼Œè¿™é‡Œé›¶çŸ¢é‡çš„åŠ¨ä½œæ—¶é—´ä¸º $Tâ‚€=Tâ‚‡=(T-Tâ‚-Tâ‚‚)/2$ï¼Œç”±äºMCUå®šæ—¶å™¨å•å…ƒæœ‰ä¸‰ä¸ªæ¯”è¾ƒå¯„å­˜å™¨ï¼Œæ¯ä¸ªæ¯”è¾ƒå•å…ƒæ§åˆ¶ä¸¤è·¯äº’è¡¥çš„PWM,æ­£å¥½å¯ä»¥å®ç°ä¸ƒæ®µå¼çš„SVPWM,ä¸ºäº†ç»™å‡ºæ¯”è¾ƒå¯„å­˜å™¨çš„å€¼ï¼Œè¿™é‡Œå¼•å…¥äº†ä¸€äº›æ—¶é—´å˜é‡ $T_aï¼ŒT_bï¼ŒT_c$

PWM æ¨¡å¼2ä¸‹çš„ï¼š

![image-20231011173452773](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231011173452773.png)

$$
\begin{cases}
T_a = \cfrac{T-T_1-T_2}{4} \\
T_b = -\cfrac{T_a+T_1}{2}  \\
T_c = -\cfrac{T_b+T_2}{2}
\end{cases}
$$
PWM æ¨¡å¼1ä¸‹çš„ï¼š

![image-20231011173307906](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231011173307906.png)
$$
\begin{cases}
T_a = \cfrac{T+T_1+T_2}{4} \\
T_b = -\cfrac{T_a-T_1}{2}  \\
T_c = -\cfrac{T_b-T_2}{2}
\end{cases}
$$

è¿™ä¹Ÿæ˜¯åœ¨è®¡æ•°å™¨å¢è®¡æ•°æˆ–å‡è®¡æ•°æ—¶çš„æ¯”è¾ƒå€¼ï¼Œåœ¨å…­ä¸ªæ‰‡åŒºä¸­ç”±äºä½œç”¨çš„çŸ¢é‡ä¸åŒæ‰€ä»¥è¾“å‡ºPWMçš„ç¿»è½¬æ—¶åˆ»ä¹Ÿä¸åŒï¼Œä½†éƒ½è¦æ»¡è¶³æ¯ä¸ªå‘¨æœŸæ¯ä¸ªå¼€å…³æœ€å¤šåŠ¨åšä¸¤æ¬¡çš„åŸåˆ™ã€‚æ¯ä¸ªæ‰‡åŒºçš„æ¯”è¾ƒå€¼è¡¨å¦‚ä¸‹ï¼š

|  æ‰‡åŒº   |  $I$  | $II$  | $III$ | $IV$  |  $V$  |
| :-----: | :---: | :---: | :---: | :---: | :---: |
| $CCR_A$ | $T_b$ | $T_a$ | $T_c$ | $T_c$ | $T_b$ |
| $CCR_B$ | $T_a$ | $T_b$ | $T_b$ | $T_a$ | $T_c$ |
| $CCR_C$ | $T_c$ | $T_c$ | $T_a$ | $T_b$ | $T_a$ |

è¿™æ ·ï¼Œä¸‰ç›¸å¯¹åº”çš„çŸ¢é‡ä½œç”¨æ—¶é—´å°±åˆ†é…å¥½äº†ï¼Œä½†æ˜¯éœ€è¦æŠŠæ—¶é—´è½¬æ¢æˆä¸åŒå•ç‰‡æœºå¯¹åº”çš„æ¯”è¾ƒå€¼ã€‚å› æ­¤è¾“å‡ºè¿˜éœ€è¦ä¹˜ä¸Šç›¸åº”çš„ç³»æ•°ï¼Œå–å†³çš„ä¸åŒMCUå·¥ä½œçš„PWMé¢‘ç‡å¯¹åº”çš„æ¯”è¾ƒå€¼ã€‚

#### 4.3.3 SVPWM ä¸­ç‚¹å¹³ç§»æ³•

ç›¸æ¯”ä¸æ‰‡åŒºåˆ¤æ–­å®ç°çš„ SVPWM æ–¹æ³•ï¼Œä¸­ç‚¹å¹³ç§»æ³•æ²¡æœ‰å¤§é‡å¤æ‚çš„è®¡ç®—ï¼Œç¨‹åºæ›´åŠ ç®€å•ã€‚

ä¸­ç‚¹å¹³ç§»æ³•æ˜¯é€šè¿‡ Clarke é€†å˜æ¢å¾—åˆ° SPWM ï¼Œç„¶åå¯¹å…¶æ³¨å…¥ä¸‰æ¬¡ä¸‰è§’è°æ³¢ç”µå‹å¾—åˆ°è·Ÿæ‰‡åŒºåˆ¤æ–­çš„ SVPWM ä¸€æ ·ã€‚
$$
\begin{cases}
V_i(t) = V^*_i(t)+e(t),i=a,b,c \\
e(t) = \cfrac{1}{2}(1-V^*_{max})+\cfrac{1}{2}(-1-V^*_{min})
\end{cases}
$$
å…¶ä¸­ $V^*_i(t)$ å°±æ˜¯ Clark åå˜æ¢å¾—åˆ°çš„ä¸‰ç›¸ç”µå‹ï¼Œ$V_{max}$ å’Œ $V_{min}$ æ˜¯ä¸‰ç›¸ç”µå‹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå®ç°åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![image-20231012161405215](https://raw.githubusercontent.com/disnox/picgo_img/main/pmsm_motor/image-20231012161405215.png)

### 4.4 PI æ§åˆ¶å™¨åŠå‚æ•°è®¾è®¡

ç”µæœºæ§åˆ¶çš„ç”µæµç¯å’Œé€Ÿåº¦ç¯å‚æ•°éƒ½æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›ç›¸å…³å…¬å¼è®¡ç®—å‡ºæ¥çš„ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘è°ƒè¯•ä¸­ä¾ç„¶éœ€è¦é€šè¿‡æ‰‹åŠ¨è°ƒè¯•ï¼Œè®¡ç®—å‡ºæ¥çš„å‚æ•°åªæ˜¯ä¸€ä¸ªç†è®ºå€¼ã€‚

#### 4.4.1 ç”µæµç¯ PI å‚æ•°è®¾è®¡

å‚è€ƒ TI çš„è®¾è®¡ï¼Œç”µæµç¯çš„PIå‚æ•°æ˜¯å¯ä»¥é€šè¿‡ç”µæœºçš„ç”µé˜»å’Œç”µæ„Ÿæ¥è®¡ç®—å¾—å‡ºã€‚

å¿½ç•¥åç”µåŠ¨åŠ¿å¾—åˆ° d-q åæ ‡è½´çš„ç”µå‹æ–¹ç¨‹ï¼š
$$
\begin{cases}
u_d = R_si_d + L_d\cfrac{d}{dt}i_d \\
u_q = R_si_q + L_q\cfrac{d}{dt}i_q
\end{cases}
$$
å¯¹ä¸Šé¢çš„å¼å­è¿›è¡Œæ‹‰æ™®æ‹‰æ–¯å˜æ¢å¾—åˆ°ï¼š
$$
\begin{cases}
G_d(s)= \cfrac{U_d(s)}{I_d(s)}=\cfrac{1}{L_ds+R_s}\\
G_q(s)= \cfrac{U_q(s)}{I_q(s)}=\cfrac{1}{L_qs+R_s}
\end{cases}
$$
å¾—åˆ°ç”µæµç¯çš„ä¼ é€’å‡½æ•°ä¸ºï¼š
$$
\begin{cases}
G_{dcl}(s)= \cfrac{PI(s)G_d(s)}{1+PI(s)G_d(s)}=\cfrac{(k_{pd}+\cfrac{k_{id}}{s})(\cfrac{1}{L_ds+R_s})}{1+(k_{pd}+\cfrac{k_id}{s})(\cfrac{1}{L_ds+R_s})} \\
G_{qcl}(s)= \cfrac{PI(s)G_q(s)}{1+PI(s)G_q(s)}=\cfrac{(k_{pq}+\cfrac{k_{iq}}{s})(\cfrac{1}{L_qs+R_s})}{1+(k_{pq}+\cfrac{k_iq}{s})(\cfrac{1}{L_qs+R_s})} \\
\end{cases}
$$
é—­ç¯ä¼ é€’å‡½æ•°åŒ–ç®€åˆ°æœ€åå¾—åˆ°ç”µæµç¯çš„ $PI$ å‚æ•°ï¼Œå…¶ä¸­ $B_{andwith}$ ä¸ºå¸¦å®½ç³»æ•°ï¼š
$$
\begin{cases}
k_{pd} = L_d\times B_{andwith} \\
k_{id} = R_s\times B_{andwith} \\
\end{cases}
$$

$$
\begin{cases}
k_{pq} = L_q\times B_{andwith} \\
k_{iq} = R_s\times B_{andwith} \\
\end{cases}
$$

æ³¨æ„ï¼š

è¿™é‡Œçš„ $L_s$ å’Œ $R_s$ çš„å•ä½æ˜¯ $H$ å’Œ $Î©$ã€‚

ä¸€èˆ¬è®¾è®¡ç”µæµç¯ PI æ§åˆ¶å™¨å‚æ•°æˆ–è€…å…¶ä»–æ§åˆ¶å™¨å‚æ•°æ—¶éœ€è¦è€ƒè™‘å¸¦å®½çš„é€‰å–ï¼Œä¸€èˆ¬å¸¦å®½è¶Šé«˜ï¼Œå“åº”è¶Šå¿«ä½†æ˜¯ç›¸åº”ç¨³æ€æ€§èƒ½åå·®ï¼Œå¸¦å®½è¶Šä½å“åº”è¶Šæ…¢ï¼Œç›¸åº”çš„ç¨³æ€æ€§èƒ½å°±è¶Šå¥½ã€‚è®¾è®¡æ§åˆ¶å™¨å‚æ•°æ—¶æ ¹æ®ç³»ç»Ÿå®šä¹‰éœ€æ±‚è¿›è¡Œè°ƒæ•´å³å¯ã€‚

æ ¹æ®tiçš„èµ„æ–™ï¼Œå¸¦å®½å–ç”µæµé‡‡æ ·é¢‘ç‡çš„ 1/20ï¼›ä¸€èˆ¬ç”µæµç¯å¸¦å®½ä»100Hzåˆ°1000Hzçš„éƒ½æœ‰ã€‚

#### 4.4.2 é€Ÿåº¦ç¯ PI å‚æ•°è®¾è®¡

$$
\begin{cases}
k_{p\omega} = \cfrac{\beta J}{1.5p_n\psi_f} \\
k_{i\omega} = \beta k_{p\omega} \\
\end{cases}
$$

å…¶ä¸­ $\beta$ æ˜¯é€Ÿåº¦ç¯çš„æœŸæœ›å¸¦å®½ï¼Œå•ä½ä¸º rad/sï¼›$J$ ä¸ºè½¬åŠ¨æƒ¯é‡ï¼›$p_n$ ä¸ºæå¯¹æ•°ï¼›$\psi_f$ ä¸ºç”µæœºçš„ç£é“¾ã€‚

## 5. æœ‰æ„Ÿæ§åˆ¶

### 5.1 å¼€å…³éœå°”è§’åº¦è§‚æµ‹å™¨

### 5.2 çº¿æ€§éœå°”è§’åº¦è§‚æµ‹å™¨

### 5.3 ç£ç¼–ç å™¨è§’åº¦è§‚æµ‹å™¨

## 6. æ— æ„Ÿæ§åˆ¶

### 6.1 éçº¿æ€§ç£é“¾è§‚æµ‹å™¨

### 6.2 å…¨é˜¶æ»‘è†œè§‚æµ‹å™¨

### 6.3 é¾™ä¼¯æ ¼è§‚æµ‹å™¨

### 6.4 æ‰©å±•å¡å°”æ›¼æ»¤æ³¢è§‚æµ‹å™¨

## 7. æµ‹é€ŸåŸç†

### 7.1 Mæ³•æµ‹é€Ÿ

### 7.2 Tæ³•æµ‹é€Ÿ

### 7.3 M/Tæ³•æµ‹é€Ÿ

### 7.4 PLL æµ‹é€Ÿ

## 8. çŸ¢é‡æ§åˆ¶æ–¹æ³•

### 8.1 id = 0 æ§åˆ¶

### 8.2 MTPA (æœ€å¤§è½¬çŸ©ç”µæµæ¯”æ§åˆ¶)

### 8.3 MTPV (æœ€å¤§è½¬çŸ©ç”µå‹æ¯”æ§åˆ¶)

### 8.4 å¼±ç£æ§åˆ¶

### 8.5 æœ€å¤§åŠŸç‡è¾“å‡ºæ§åˆ¶
